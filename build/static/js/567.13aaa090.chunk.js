"use strict";(self.webpackChunkpandora=self.webpackChunkpandora||[]).push([[567],{7567:(e,s,t)=>{t.r(s),t.d(s,{default:()=>A});var a=t(6213),n=t(5043),i=t(9086),c=t(3216),l=t(5475),r=t(8076),d=t(1806),h=t(3460),o=t(2420),u=t(9650),x=t(4882),j=t(1655),m=t(579);const g="/main";class v extends n.Component{constructor(){super(...arguments),this.state={value:"",users:[]},this.search=async e=>{a.A.get("".concat(g,"/admin/users"),{params:{value:e}}).then((e=>{const s=e.data;this.setState({users:s})}))},this.onChangeHandler=async e=>{this.search(e.target.value),this.state.value=e.target.value}}componentDidMount(){const e=JSON.parse(localStorage.getItem("user"));a.A.defaults.headers.common.Authorization="Bearer "+e.accessToken,a.A.get("".concat(j.A).concat(g,"/getusers")).then((e=>{const s=e.data;this.setState({users:s})}))}setActive(e,s){console.log(e,s),a.A.post("".concat(j.A).concat(g,"/admin/user/ban/")+e.id).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}active(e){return e.active?(0,m.jsx)(o.A,{align:"right",className:"finished",children:(0,m.jsxs)("select",{onChange:s=>this.setActive(e,s),children:[(0,m.jsx)("option",{selected:!0,children:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"}),(0,m.jsx)("option",{children:"\u041d\u0435 \u0410\u043a\u0442\u0438\u0432\u0435\u043d"})]})}):(0,m.jsx)(o.A,{align:"right",className:"unfinished",children:(0,m.jsxs)("select",{onChange:s=>this.setActive(e,s),children:[(0,m.jsx)("option",{children:"\u0410\u043a\u0442\u0438\u0432\u0435\u043d"}),(0,m.jsx)("option",{selected:!0,children:"\u041d\u0435 \u0410\u043a\u0442\u0438\u0432\u0435\u043d"})]})})}render(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("input",{value:this.state.value,onChange:e=>this.onChangeHandler(e),type:"text",className:"searchUsers",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),(0,m.jsx)(u.A,{children:(0,m.jsxs)(d.A,{className:"table adminPanelTable uitable",children:[(0,m.jsx)(x.A,{children:(0,m.jsxs)(r.A,{className:"uitableHead",children:[(0,m.jsx)(o.A,{style:{width:"5%"},children:(0,m.jsx)("a",{children:"#"})}),(0,m.jsx)(o.A,{style:{width:"20%"},children:(0,m.jsx)("a",{children:"\u041f\u043e\u0447\u0442\u0430"})}),(0,m.jsx)(o.A,{style:{width:100},children:(0,m.jsx)("a",{children:"\u0424\u0418\u041e"})}),(0,m.jsx)(o.A,{align:"right",children:(0,m.jsx)("a",{children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"})})]})}),(0,m.jsx)(h.A,{children:this.state.users.map(((e,s)=>(0,m.jsxs)(r.A,{hover:!0,children:[(0,m.jsx)(o.A,{children:(0,m.jsx)("a",{children:s+1})}),(0,m.jsx)(o.A,{style:{width:"20%"},children:(0,m.jsx)(l.N_,{className:"rowInfo",to:{pathname:"/users/".concat(e.username),state:{user:e}},children:e.username})}),(0,m.jsx)(o.A,{children:(0,m.jsx)("a",{children:e.email})}),this.active(e)]})))})]})})]})}}const A=e=>{const s=JSON.parse(localStorage.getItem("user")),t=(0,c.Zp)(),[l,r]=(0,n.useState)(0),[d,h]=(0,n.useState)(0),[o,u]=(0,n.useState)(0);(0,c.zy)();return(0,n.useEffect)((()=>{s.roles.includes("ADMIN")||t("/");a.A.get("".concat("http://10.202.20.92:8081/api/pandora/main","/general")).then((e=>{r(e.data.userNumber),h(e.data.allLogsNum),u(e.data.todayRequests)}))})),(0,m.jsxs)("div",{className:"adminPage",style:{display:"flex",flexDirection:"row"},children:[(0,m.jsx)(i.A,{}),(0,m.jsxs)("section",{children:[(0,m.jsxs)("div",{className:"countStats",children:[(0,m.jsxs)("div",{className:"lastQuery",children:[(0,m.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),(0,m.jsx)("div",{children:l})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432"}),(0,m.jsx)("div",{children:d})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"}),(0,m.jsx)("div",{children:o})]})]}),(0,m.jsx)("div",{children:(0,m.jsx)(v,{})}),(0,m.jsx)("div",{className:"footer"})]})]})}}}]);
//# sourceMappingURL=567.13aaa090.chunk.js.map