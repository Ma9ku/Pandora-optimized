"use strict";(self.webpackChunkpandora=self.webpackChunkpandora||[]).push([[530],{530:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Q});var l=s(5043),a=s(3216),r=s(6213),n=s(8587),i=s(8168),o=s(8387),c=s(8610),d=s(7266),h=s(4535),u=s(8206),x=s(4162),p=s(6803),m=s(3336),j=s(2532),v=s(2372);function A(e){return(0,v.Ay)("MuiAlert",e)}const g=(0,j.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var f=s(7392),y=s(9662),C=s(579);const S=(0,y.A)((0,C.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),w=(0,y.A)((0,C.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),N=(0,y.A)((0,C.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),b=(0,y.A)((0,C.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),R=(0,y.A)((0,C.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),M=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],z=(0,h.Ay)(m.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t["".concat(s.variant).concat((0,p.A)(s.color||s.severity))]]}})((e=>{let{theme:t}=e;const s="light"===t.palette.mode?d.e$:d.a,l="light"===t.palette.mode?d.a:d.e$;return(0,i.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[a]=e;return{props:{colorSeverity:a,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(a,"Color")]:s(t.palette[a].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(a,"StandardBg")]:l(t.palette[a].light,.9),["& .".concat(g.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(a,"IconColor")]}:{color:t.palette[a].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[l]=e;return{props:{colorSeverity:l,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(l,"Color")]:s(t.palette[l].light,.6),border:"1px solid ".concat((t.vars||t).palette[l].light),["& .".concat(g.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(l,"IconColor")]}:{color:t.palette[l].main}}}})),...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.dark})).map((e=>{let[s]=e;return{props:{colorSeverity:s,variant:"filled"},style:(0,i.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(s,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(s,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[s].dark:t.palette[s].main,color:t.palette.getContrastText(t.palette[s].main)})}}))]})})),k=(0,h.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),I=(0,h.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),B=(0,h.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),L={success:(0,C.jsx)(S,{fontSize:"inherit"}),warning:(0,C.jsx)(w,{fontSize:"inherit"}),error:(0,C.jsx)(N,{fontSize:"inherit"}),info:(0,C.jsx)(b,{fontSize:"inherit"})},T=l.forwardRef((function(e,t){const s=(0,u.b)({props:e,name:"MuiAlert"}),{action:l,children:a,className:r,closeText:d="Close",color:h,components:m={},componentsProps:j={},icon:v,iconMapping:g=L,onClose:y,role:S="alert",severity:w="success",slotProps:N={},slots:b={},variant:T="standard"}=s,q=(0,n.A)(s,M),D=(0,i.A)({},s,{color:h,severity:w,variant:T,colorSeverity:h||w}),O=(e=>{const{variant:t,color:s,severity:l,classes:a}=e,r={root:["root","color".concat((0,p.A)(s||l)),"".concat(t).concat((0,p.A)(s||l)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,c.A)(r,A,a)})(D),F={slots:(0,i.A)({closeButton:m.CloseButton,closeIcon:m.CloseIcon},b),slotProps:(0,i.A)({},j,N)},[H,P]=(0,x.A)("closeButton",{elementType:f.A,externalForwardedProps:F,ownerState:D}),[E,W]=(0,x.A)("closeIcon",{elementType:R,externalForwardedProps:F,ownerState:D});return(0,C.jsxs)(z,(0,i.A)({role:S,elevation:0,ownerState:D,className:(0,o.A)(O.root,r),ref:t},q,{children:[!1!==v?(0,C.jsx)(k,{ownerState:D,className:O.icon,children:v||g[w]||L[w]}):null,(0,C.jsx)(I,{ownerState:D,className:O.message,children:a}),null!=l?(0,C.jsx)(B,{ownerState:D,className:O.action,children:l}):null,null==l&&y?(0,C.jsx)(B,{ownerState:D,className:O.action,children:(0,C.jsx)(H,(0,i.A)({size:"small","aria-label":d,title:d,color:"inherit",onClick:y},P,{children:(0,C.jsx)(E,(0,i.A)({fontSize:"small"},W))}))}):null]}))}));var q=s(6446),D=s(279),O=s(1806),F=s(3460),H=s(2420),P=s(9650),E=s(4882),W=s(8076),_=s(5865),U=s(4536),V=s(5037);const Z=s(1655).A+"/main";class $ extends l.Component{constructor(){super(...arguments),this.state={user:{},date:"",allRequsetNum:0,todayRequsetNum:0,logs:[],role:"",newRole:0,id:0},this.componentDidMount=()=>{r.A.get("".concat(Z,"/getuserdetails"),{params:{username:this.props.username.username}}).then((e=>{const t=e.data;console.log(e.data);let s=e.data.user,l=e.data.role,a=e.data.date;this.setState({user:s,role:l,date:a,allRequsetNum:t.allRequsetNum,todayRequsetNum:t.todayRequsetNum,logs:t.logs})}))},this.promote=async e=>{const t=JSON.parse(localStorage.getItem("user"));r.A.defaults.headers.common.Authorization="Bearer "+t.accessToken,r.A.get("".concat(Z,"/changeUserRole"),{params:{user:e,role:this.state.newRole}}).then((e=>{if(200==e.status){document.getElementById("alertofChange").style.display="block"}}))},this.rels=e=>{console.log(e)},this.search=async e=>{r.A.get("".concat(Z,"/admin/searchuserlogs"),{params:{value:e,username:this.state.user.username}}).then((e=>{const t=e.data;this.setState({logs:t})}))},this.onChangeHandler=async e=>{this.search(e.target.value),this.state.value=e.target.value},this.setNumbers=()=>null==this.state.date?(0,C.jsx)("div",{children:"\u041d\u0435\u0442 \u0434\u0430\u0442\u044b"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:this.state.date.slice(11,19)}),(0,C.jsx)("div",{children:this.state.date.slice(0,10)})]})}render(){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"userDetailsBlock",children:(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"userFirstBlock",children:[(0,C.jsxs)("div",{className:"userInfo",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{children:this.state.user.username}),":",(0,C.jsx)("span",{children:this.state.role})]}),(0,C.jsx)("div",{children:this.state.user.email})]}),(0,C.jsxs)("select",{name:"roles",id:"connectionsUserDetails",onChange:e=>{let t;"vip"==e.target.value?t=2:"1"==e.target.value?t=3:"2"==e.target.value?t=4:"3"==e.target.value&&(t=5),this.setState({newRole:t})},children:[(0,C.jsx)("option",{children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430"}),(0,C.jsx)("option",{value:"vip",children:"\u0412\u0418\u041f"}),(0,C.jsx)("option",{value:"1",children:"1 \u0443\u0440\u043e\u0432\u0435\u043d\u044c"}),(0,C.jsx)("option",{value:"2",children:"2 \u0443\u0440\u043e\u0432\u0435\u043d\u044c"}),(0,C.jsx)("option",{value:"3",children:"3 \u0443\u0440\u043e\u0432\u0435\u043d\u044c"})]}),(0,C.jsx)("button",{className:"changeRole",onClick:e=>this.promote(this.state.user.id),children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})]}),(0,C.jsx)("div",{id:"alertofChange",style:{display:"none"},children:(0,C.jsx)(T,{severity:"success",style:{backgroundColor:"#17191C"},children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e! \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"})}),(0,C.jsxs)("div",{className:"countStatsUser",children:[(0,C.jsxs)("div",{className:"lastQuery",children:[(0,C.jsx)("div",{children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"}),this.setNumbers()]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432"}),(0,C.jsx)("div",{children:this.state.allRequsetNum})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"}),(0,C.jsx)("div",{children:this.state.todayRequsetNum})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("input",{value:this.state.value,onChange:e=>this.onChangeHandler(e),type:"text",className:"searchUsers",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c"}),(0,C.jsx)(P.A,{children:(0,C.jsxs)(O.A,{"aria-label":"collapsible table",className:"userDetailsTable",children:[(0,C.jsx)(E.A,{children:(0,C.jsxs)(W.A,{className:"uitableHead",colSpan:4,children:[(0,C.jsx)(H.A,{style:{width:"5%"},align:"left",children:(0,C.jsx)("a",{className:"userDetailsTable",children:"#"})}),(0,C.jsx)(H.A,{style:{width:"20%"},align:"left",children:(0,C.jsx)("a",{className:"userDetailsTable",children:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"})}),(0,C.jsx)(H.A,{style:{width:"60%"},align:"left",children:(0,C.jsx)("a",{className:"userDetailsTable",children:"\u0417\u0430\u043f\u0440\u043e\u0441"})}),(0,C.jsx)(H.A,{style:{width:"15%"},colSpan:2})]})}),(0,C.jsx)(F.A,{children:this.state.logs.length>0?this.state.logs.map(((e,t)=>(0,C.jsx)(J,{row:e,index:t}))):(0,C.jsx)(H.A,{className:"zeroResult",align:"center",colSpan:4,style:{borderBottom:"hidden"},children:(0,C.jsx)("a",{className:"noUserDetails",children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})})})]})})]})]})}),(0,C.jsx)("div",{className:"footer"})]})}}function J(e){const{row:t}=e,[s,a]=(0,l.useState)(!1);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(W.A,{hover:!0,className:"userDetailsRow",children:[(0,C.jsx)(H.A,{children:(0,C.jsx)("a",{children:e.index+1})}),(0,C.jsx)(H.A,{style:{},align:"left",children:(0,C.jsxs)("a",{children:[t.date.slice(0,10)," ",t.date.slice(11,19)]})}),(0,C.jsx)(H.A,{style:{},align:"left",children:(0,C.jsx)("a",{children:t.obwii})}),(0,C.jsx)(H.A,{children:(0,C.jsx)("a",{children:t.fat})}),(0,C.jsx)(H.A,{children:(0,C.jsx)(f.A,{"aria-label":"expand row",size:"small",onClick:()=>a(!s),children:s?(0,C.jsx)(V.A,{style:{fill:"#ffffff"}}):(0,C.jsx)(U.A,{style:{fill:"#ffffff"}})})})]}),(0,C.jsx)(W.A,{children:(0,C.jsx)(H.A,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,C.jsx)(D.A,{in:s,timeout:"auto",unmountOnExit:!0,children:(0,C.jsxs)(q.A,{sx:{margin:1},children:[(0,C.jsx)(_.A,{variant:"h6",gutterBottom:!0,component:"div",children:(0,C.jsx)("a",{style:{fontSize:"15px"},children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0435"})}),(0,C.jsx)(O.A,{size:"small","aria-label":"purchases",children:(0,C.jsxs)(E.A,{children:[(0,C.jsxs)(W.A,{children:[(0,C.jsx)(H.A,{style:{width:"20%"},align:"left",children:(0,C.jsx)("a",{children:"\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"})}),(0,C.jsx)(H.A,{style:{width:"80%"},align:"left",children:(0,C.jsx)("a",{children:t.approvement_data?t.approvement_data:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})})]}),(0,C.jsxs)(W.A,{children:[(0,C.jsx)(H.A,{style:{width:"20%"},align:"left",children:(0,C.jsx)("a",{children:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u0430"})}),(0,C.jsx)(H.A,{style:{width:"80%"},align:"left",children:(0,C.jsx)("a",{children:t.request_body.join(",")})})]}),(0,C.jsxs)(W.A,{children:[(0,C.jsx)(H.A,{style:{width:"20%"},align:"left",children:(0,C.jsx)("a",{children:"\u041b\u0438\u043c\u0438\u0442"})}),(0,C.jsx)(H.A,{style:{width:"80%"},align:"left",children:(0,C.jsx)("a",{children:t.limit_?t.limit_:"\u041b\u0438\u043c\u0438\u0442 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d"})})]}),(0,C.jsxs)(W.A,{style:{borderBottom:"hidden"},children:[(0,C.jsx)(H.A,{style:{width:"20%"},align:"left",children:(0,C.jsx)("a",{children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c"})}),(0,C.jsx)(H.A,{style:{width:"80%"},align:"left",children:(0,C.jsx)("a",{children:t.depth_?t.depth_:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d"})})]})]})})]})})})})]})}const Q=(G=$,e=>(0,C.jsx)(G,{...e,username:(0,a.g)()}));var G}}]);
//# sourceMappingURL=530.18f049f9.chunk.js.map